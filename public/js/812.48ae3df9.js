(self["webpackChunkjuanpi"]=self["webpackChunkjuanpi"]||[]).push([[812],{3812:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contains"},[e("div",{staticClass:"header"},[e("router-link",{attrs:{to:"/category"}},[e("i",{staticClass:"return iconfont icon-fanhui"})]),e("input",{directives:[{name:"model",rawName:"v-model.lazy.trim",value:t.search.name,expression:"search.name",modifiers:{lazy:!0,trim:!0}}],attrs:{type:"text",placeholder:"搜索商品"},domProps:{value:t.search.name},on:{change:function(e){t.$set(t.search,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),e("span",{}),e("i",{staticClass:"iconfont icon-zhankaii spread",on:{click:function(e){t.isShow=!t.isShow}}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"spread-content"},[e("li",[e("router-link",{attrs:{to:"/home"}},[e("i",{staticClass:"iconfont icon-home"}),e("span",[t._v("首页")])])],1),e("li",[e("router-link",{attrs:{to:"/cart"}},[e("i",{staticClass:"iconfont icon-cart"}),e("span",[t._v("购物车")])])],1),e("li",[e("router-link",{attrs:{to:"/totalorder"}},[e("i",{staticClass:"iconfont icon-wodedingdan"}),e("span",[t._v("我的订单")])])],1)])],1),e("div",{staticClass:"order"},[e("span",{staticClass:"price",class:{active:"price"===t.search.orderCol},on:{click:function(e){return t.changeOrder("price")}}},[t._v(" 价格 "),e("i",{class:`iconfont icon-${t.search.orderDir}`})]),e("span",{staticClass:"sale",class:{active:"sale"===t.search.orderCol},on:{click:function(e){return t.changeOrder("sale")}}},[t._v(" 销量 "),e("i",{class:`iconfont icon-${t.search.orderDir}`})]),e("span",{staticClass:"rate",class:{active:"rate"===t.search.orderCol},on:{click:function(e){return t.changeOrder("rate")}}},[t._v(" 好评 "),e("i",{class:`iconfont icon-${t.search.orderDir}`})])]),t._m(0),e("div",{ref:"scroll",staticClass:"content hide-scroll"},[e("div",[e("ul",{staticClass:"list"},t._l(t.list,(function(i){return e("li",[e("router-link",{attrs:{to:`/detail/${i.id}`}},[e("img",{attrs:{src:i.avatar,alt:""}}),e("div",{staticClass:"item-detail"},[e("div",{staticClass:"price-wrapper"},[e("span",{staticClass:"price",domProps:{textContent:t._s("￥"+i.price)}}),e("span",{staticClass:"original-price"},[t._v("￥499")])]),e("div",{staticClass:"name-wrapper"},[e("span",{staticClass:"name",domProps:{textContent:t._s(i.name)}})])])])],1)})),0),e("p",[t._v("————"),e("span",{domProps:{textContent:t._s(t.tip)}}),t._v("————")])])]),e("div",{staticClass:"back-top"},[e("i",{staticClass:"iconfont icon-huidaodingbu",on:{click:t.backTop}})])])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"category-wrapper"},[e("span",{staticClass:"total checked"},[t._v("全部")]),e("span",{staticClass:"dress"},[t._v("连衣裙")])])}],r=i(5710),o=i(7495),a=i.n(o),c=i(7564),h=i.n(c),l={name:"List",data(){return{search:{name:"",cid:parseInt(this.$route.params.cid),orderCol:"price",orderDir:"asc",pageSize:6},list:[],hasMore:!0,isLoading:!1,title:"",isShow:!1}},watch:{search:{handler(){this.getList()},deep:!0,immediate:!0},list(){this.$nextTick((()=>{h()(this.$refs.scroll,(()=>{this.scroll?this.scroll.refresh():(this.scroll=new(a())(this.$refs.scroll,{click:!0,bounce:!1,momentum:!0}),this.scroll.on("  ",(()=>{this.isLoading||this.hasMore&&this.scroll.maxScrollY===this.scroll.y&&this.getList(!0)})))}))}))}},beforeDestroy(){this.scroll&&(this.scroll.destroy(),this.scroll=null)},activated(){console.log(1211),this.search.cid=parseInt(this.$route.params.cid)},computed:{tip(){return this.isLoading?"加载中":this.hasMore?"上拉加载更多":0===this.list.length?"暂无更多商品":"已到底部"}},methods:{async getList(t=!1){try{t||(this.list=[]),this.isLoading=!0;let e=await r.yF.get({...this.search,begin:t?this.list.length:0});this.hasMore=this.search.pageSize===e.length,this.list=t?[...this.list,...e]:e,this.isLoading=!1}catch(e){}},changeOrder(t){if(this.isLoading)return this.$juanNotice("您的操作太频繁了！");t!==this.search.orderCol?this.search.orderCol=t:this.search.orderDir="asc"===this.search.orderDir?"desc":"asc"},backTop(){this.scroll&&this.scroll.scrollTo(0,0,500)}}},d=l,p=i(1001),u=(0,p.Z)(d,s,n,!1,null,"f51455bc",null),m=u.exports},7158:function(t){(function(e,i){t.exports?t.exports=i():e.EvEmitter=i()})("undefined"!=typeof window?window:this,(function(){function t(){}let e=t.prototype;return e.on=function(t,e){if(!t||!e)return this;let i=this._events=this._events||{},s=i[t]=i[t]||[];return s.includes(e)||s.push(e),this},e.once=function(t,e){if(!t||!e)return this;this.on(t,e);let i=this._onceEvents=this._onceEvents||{},s=i[t]=i[t]||{};return s[e]=!0,this},e.off=function(t,e){let i=this._events&&this._events[t];if(!i||!i.length)return this;let s=i.indexOf(e);return-1!=s&&i.splice(s,1),this},e.emitEvent=function(t,e){let i=this._events&&this._events[t];if(!i||!i.length)return this;i=i.slice(0),e=e||[];let s=this._onceEvents&&this._onceEvents[t];for(let n of i){let i=s&&s[n];i&&(this.off(t,n),delete s[n]),n.apply(this,e)}return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t}))},7564:function(t,e,i){
/*!
 * imagesLoaded v5.0.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(e,s){t.exports?t.exports=s(e,i(7158)):e.imagesLoaded=s(e,e.EvEmitter)})("undefined"!==typeof window?window:this,(function(t,e){let i=t.jQuery,s=t.console;function n(t){if(Array.isArray(t))return t;let e="object"==typeof t&&"number"==typeof t.length;return e?[...t]:[t]}function r(t,e,o){if(!(this instanceof r))return new r(t,e,o);let a=t;"string"==typeof t&&(a=document.querySelectorAll(t)),a?(this.elements=n(a),this.options={},"function"==typeof e?o=e:Object.assign(this.options,e),o&&this.on("always",o),this.getImages(),i&&(this.jqDeferred=new i.Deferred),setTimeout(this.check.bind(this))):s.error(`Bad element for imagesLoaded ${a||t}`)}r.prototype=Object.create(e.prototype),r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const o=[1,9,11];r.prototype.addElementImages=function(t){"IMG"===t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);let{nodeType:e}=t;if(!e||!o.includes(e))return;let i=t.querySelectorAll("img");for(let s of i)this.addImage(s);if("string"==typeof this.options.background){let e=t.querySelectorAll(this.options.background);for(let t of e)this.addElementBackgroundImages(t)}};const a=/url\((['"])?(.*?)\1\)/gi;function c(t){this.img=t}function h(t,e){this.url=t,this.element=e,this.img=new Image}return r.prototype.addElementBackgroundImages=function(t){let e=getComputedStyle(t);if(!e)return;let i=a.exec(e.backgroundImage);while(null!==i){let s=i&&i[2];s&&this.addBackground(s,t),i=a.exec(e.backgroundImage)}},r.prototype.addImage=function(t){let e=new c(t);this.images.push(e)},r.prototype.addBackground=function(t,e){let i=new h(t,e);this.images.push(i)},r.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();let t=(t,e,i)=>{setTimeout((()=>{this.progress(t,e,i)}))};this.images.forEach((function(e){e.once("progress",t),e.check()}))},r.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&s&&s.log(`progress: ${i}`,t,e)},r.prototype.complete=function(){let t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){let t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},c.prototype=Object.create(e.prototype),c.prototype.check=function(){let t=this.getIsImageComplete();t?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src)},c.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},c.prototype.confirm=function(t,e){this.isLoaded=t;let{parentNode:i}=this.img,s="PICTURE"===i.nodeName?i:this.img;this.emitEvent("progress",[this,s,e])},c.prototype.handleEvent=function(t){let e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},h.prototype=Object.create(c.prototype),h.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;let t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},h.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},h.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},r.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(i=e,i.fn.imagesLoaded=function(t,e){let s=new r(this,t,e);return s.jqDeferred.promise(i(this))})},r.makeJQueryPlugin(),r}))}}]);
//# sourceMappingURL=812.48ae3df9.js.map