"use strict";(self["webpackChunkjuanpi"]=self["webpackChunkjuanpi"]||[]).push([[604],{9604:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"contains"},[s("div",{staticClass:"header",staticStyle:{"background-color":"#ffffff"}},[s("span",{staticClass:"header-title"},[t._v("购物车")]),s("input",{attrs:{type:"button",value:t.isEdit?"完成":"编辑"},on:{click:function(s){t.isEdit=!t.isEdit}}})]),s("div",{staticClass:"content hide-scroll"},[s("ul",{staticClass:"list"},t._l(t.list,(function(e,i){return s("li",{key:i},[s("i",{staticClass:"checkbox",class:{checked:t.status[i][t.isEdit?"checked2":"checked1"]},on:{click:function(s){t.status[i][t.isEdit?"checked2":"checked1"]=!t.status[i][t.isEdit?"checked2":"checked1"]}}}),s("div",{staticClass:"item-avatar"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"item-detail"},[s("div",{staticClass:"name-wrapper"},[s("span",{staticClass:"name",domProps:{textContent:t._s(e.name)}})]),s("div",{staticClass:"price-wrapper"},[s("span",{staticClass:"price",domProps:{textContent:t._s("￥"+e.price+".00")}})]),s("JuanCount",{attrs:{count:e.count},on:{decrease:function(s){return t.decrease(e.id)},increase:function(s){return t.increase(e.id)}}})],1)])})),0)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],staticClass:"bottom"},[s("div",{staticClass:"checkbox-wrapper"},[s("i",{staticClass:"checkbox",class:{checked:t.isAllChecked},staticStyle:{"margin-right":"5px"},on:{click:function(s){t.isAllChecked=!t.isAllChecked}}}),t._v("全选 ")]),s("div",{staticClass:"total-wrapper"},[t._v(" 总金额：￥ "),s("span",{staticClass:"total",domProps:{textContent:t._s(t.total)}}),t._v(".00 ")]),s("button",{staticClass:"remove",staticStyle:{"margin-left":"10px"},attrs:{disabled:0===t.buyId.length},on:{click:t.goOrderConfirm}},[t._v("去结算("+t._s(t.buyCount)+")")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isEdit,expression:"isEdit"}],staticClass:"bottom"},[s("div",{staticClass:"checkbox-wrapper"},[s("i",{staticClass:"checkbox",class:{checked:t.isAllChecked},on:{click:function(s){t.isAllChecked=!t.isAllChecked}}})]),s("button",{staticClass:"transfer"},[t._v("移入收藏夹")]),s("button",{staticClass:"remove",attrs:{disabled:0===t.buyId.length},on:{click:t.removeHandler}},[t._v("删除")])]),s("div",{staticClass:"footer"},[s("JuanTabBar")],1)])},a=[],c=e(8308),n=e(5710),r={name:"Cart",components:{JuanTabBar:c.of,JuanCount:c.jz},data(){return{isEdit:!1,status:[],list:[],isLogin:!!sessionStorage.getItem("token"),addressId:0}},async created(){if(this.isLogin)try{this.list=await n.Wk.get(),this.status=this.list.map((()=>({checked1:!0,checked2:!1})))}catch(t){}},methods:{goOrderConfirm(){this.$router.replace(`/orderconfirm?ids=${JSON.stringify(this.buyId)}`)},async removeHandler(){try{if(0===this.removeIds.length)return this.$juanNotice("请选择要删除的商品!");await this.$juanConfirm("确认删除？").then((()=>{n.Wk.remove(this.removeIds);for(let t=0;t<this.status.length;)this.status[t].checked2?(this.list.splice(t,1),this.status.splice(t,1)):t++;this.$juanNotice("删除成功！")})).catch((()=>{}))}catch(t){}},async decrease(t){await n.Wk.decrease(t),this.list.find((s=>s.id===t)).count--},async increase(t){try{await n.Wk.increase(t),this.list.find((s=>s.id===t)).count++}catch(s){}}},computed:{removeIds:{get(){let t=[];return this.status.forEach(((s,e)=>{s.checked2&&t.push(this.list[e].id)})),t}},buyId(){let t=[];return this.status.forEach(((s,e)=>{s.checked1&&t.push(this.list[e].id)})),t},isAllChecked:{get(){return this.status.every((t=>t[this.isEdit?"checked2":"checked1"]))},set(t){this.status.forEach((s=>{s[this.isEdit?"checked2":"checked1"]=t}))}},total:{get(){let t=0;return this.status.forEach(((s,e)=>{s.checked1&&(t+=this.list[e].price*this.list[e].count)})),t}},buyCount:{get(){let t=0;return this.status.forEach(((s,e)=>{s.checked1&&(t+=this.list[e].count)})),t}}}},l=r,d=e(1001),o=(0,d.Z)(l,i,a,!1,null,"148fa4de",null),h=o.exports}}]);
//# sourceMappingURL=604.33449cb2.js.map