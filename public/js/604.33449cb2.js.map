{"version":3,"file":"js/604.33449cb2.js","mappings":"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","sources":["webpack://juanpi/./src/views/Cart.vue","webpack://juanpi/src/views/Cart.vue","webpack://juanpi/./src/views/Cart.vue?5135","webpack://juanpi/./src/views/Cart.vue?12c1"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"contains\"},[_c('div',{staticClass:\"header\",staticStyle:{\"background-color\":\"#ffffff\"}},[_c('span',{staticClass:\"header-title\"},[_vm._v(\"购物车\")]),_c('input',{attrs:{\"type\":\"button\",\"value\":_vm.isEdit ? '完成' : '编辑'},on:{\"click\":function($event){_vm.isEdit = !_vm.isEdit}}})]),_c('div',{staticClass:\"content hide-scroll\"},[_c('ul',{staticClass:\"list\"},_vm._l((_vm.list),function(item,i){return _c('li',{key:i},[_c('i',{staticClass:\"checkbox\",class:{ checked: _vm.status[i][_vm.isEdit? 'checked2' : 'checked1'] },on:{\"click\":function($event){_vm.status[i][_vm.isEdit? 'checked2' : 'checked1'] = !_vm.status[i][_vm.isEdit? 'checked2' : 'checked1']}}}),_c('div',{staticClass:\"item-avatar\"},[_c('img',{attrs:{\"src\":item.avatar,\"alt\":\"\"}})]),_c('div',{staticClass:\"item-detail\"},[_c('div',{staticClass:\"name-wrapper\"},[_c('span',{staticClass:\"name\",domProps:{\"textContent\":_vm._s(item.name)}})]),_c('div',{staticClass:\"price-wrapper\"},[_c('span',{staticClass:\"price\",domProps:{\"textContent\":_vm._s('￥' + item.price + '.00')}})]),_c('JuanCount',{attrs:{\"count\":item.count},on:{\"decrease\":function($event){return _vm.decrease(item.id)},\"increase\":function($event){return _vm.increase(item.id)}}})],1)])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}],staticClass:\"bottom\"},[_c('div',{staticClass:\"checkbox-wrapper\"},[_c('i',{staticClass:\"checkbox\",class:{ checked: _vm.isAllChecked },staticStyle:{\"margin-right\":\"5px\"},on:{\"click\":function($event){_vm.isAllChecked = !_vm.isAllChecked}}}),_vm._v(\"全选 \")]),_c('div',{staticClass:\"total-wrapper\"},[_vm._v(\" 总金额：￥ \"),_c('span',{staticClass:\"total\",domProps:{\"textContent\":_vm._s(_vm.total)}}),_vm._v(\".00 \")]),_c('button',{staticClass:\"remove\",staticStyle:{\"margin-left\":\"10px\"},attrs:{\"disabled\":_vm.buyId.length === 0},on:{\"click\":_vm.goOrderConfirm}},[_vm._v(\"去结算(\"+_vm._s(_vm.buyCount)+\")\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],staticClass:\"bottom\"},[_c('div',{staticClass:\"checkbox-wrapper\"},[_c('i',{staticClass:\"checkbox\",class:{ checked: _vm.isAllChecked },on:{\"click\":function($event){_vm.isAllChecked = !_vm.isAllChecked}}})]),_c('button',{staticClass:\"transfer\"},[_vm._v(\"移入收藏夹\")]),_c('button',{staticClass:\"remove\",attrs:{\"disabled\":_vm.buyId.length === 0},on:{\"click\":_vm.removeHandler}},[_vm._v(\"删除\")])]),_c('div',{staticClass:\"footer\"},[_c('JuanTabBar')],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"contains\">\r\n    <div class=\"header\" style=\"background-color: #ffffff\">\r\n      <span class=\"header-title\">购物车</span>\r\n      <input type=\"button\" :value=\"isEdit ? '完成' : '编辑'\" @click=\"isEdit = !isEdit\">\r\n    </div>\r\n    <div class=\"content hide-scroll\">\r\n        <ul class=\"list\">\r\n          <li v-for=\"(item, i) in list\" :key=\"i\">\r\n              <i class=\"checkbox\"\r\n                 :class=\"{ checked: status[i][isEdit? 'checked2' : 'checked1'] }\"\r\n                 @click=\"status[i][isEdit? 'checked2' : 'checked1'] = !status[i][isEdit? 'checked2' : 'checked1']\"\r\n              ></i>\r\n              <div class=\"item-avatar\">\r\n                <img :src=\"item.avatar\" alt=\"\">\r\n              </div>\r\n              <div class=\"item-detail\">\r\n                <div class=\"name-wrapper\">\r\n                  <span class=\"name\" v-text=\"item.name\"></span>\r\n                </div>\r\n                <div class=\"price-wrapper\">\r\n                  <span class=\"price\" v-text=\"'￥' + item.price + '.00'\"></span>\r\n                </div>\r\n                <JuanCount :count=\"item.count\"\r\n                           @decrease=\"decrease(item.id)\"\r\n                           @increase=\"increase(item.id)\"\r\n                ></JuanCount>\r\n              </div>\r\n          </li>\r\n        </ul>\r\n    </div>\r\n    <div class=\"bottom\" v-show=\"!isEdit\">\r\n      <div class=\"checkbox-wrapper\">\r\n        <i class=\"checkbox\"\r\n           :class=\"{ checked: isAllChecked }\"\r\n           @click=\"isAllChecked = !isAllChecked\"\r\n           style=\"margin-right: 5px\"\r\n        ></i>全选\r\n      </div>\r\n      <div class=\"total-wrapper\">\r\n        总金额：￥\r\n        <span class=\"total\" v-text=\"total\"></span>.00\r\n      </div>\r\n      <button class=\"remove\"\r\n              style=\"margin-left: 10px\"\r\n              @click=\"goOrderConfirm\"\r\n              :disabled=\"buyId.length === 0\"\r\n      >去结算({{buyCount}})</button>\r\n    </div>\r\n    <div class=\"bottom\" v-show=\"isEdit\">\r\n      <div class=\"checkbox-wrapper\">\r\n        <i class=\"checkbox\"\r\n           :class=\"{ checked: isAllChecked }\"\r\n           @click=\"isAllChecked = !isAllChecked\"\r\n        ></i>\r\n      </div>\r\n      <button class=\"transfer\">移入收藏夹</button>\r\n      <button class=\"remove\" @click=\"removeHandler\" :disabled=\"buyId.length === 0\">删除</button>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <JuanTabBar></JuanTabBar>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {JuanTabBar, JuanCount} from \"../components\";\r\nimport {CartApi,OrderApi} from \"@/api\";\r\n  export default {\r\n    name: 'Cart',\r\n    components: {\r\n      JuanTabBar,\r\n      JuanCount\r\n    },\r\n    data() {\r\n      return {\r\n        isEdit: false,\r\n        status: [],\r\n        list: [],\r\n        isLogin: !!sessionStorage.getItem('token'),\r\n        addressId: 0,\r\n      }\r\n    },\r\n    async created() {\r\n      if(!this.isLogin) return;\r\n          try {\r\n            this.list = await CartApi.get();\r\n            this.status = this.list.map(() => ({checked1: true, checked2: false}))\r\n          }catch(e){}\r\n    },\r\n    methods: {\r\n        goOrderConfirm() {\r\n          this.$router.replace(`/orderconfirm?ids=${JSON.stringify(this.buyId)}`);\r\n      },\r\n      async removeHandler() {\r\n        try {\r\n          if(this.removeIds.length === 0) return this.$juanNotice('请选择要删除的商品!')\r\n          await this.$juanConfirm('确认删除？')\r\n              .then(() => {\r\n                CartApi.remove(this.removeIds);\r\n                for(let i = 0; i < this.status.length;) {\r\n                  if(this.status[i].checked2) {\r\n                    this.list.splice(i, 1);\r\n                    this.status.splice(i, 1);\r\n                  } else {\r\n                    i++;\r\n                  }\r\n                }\r\n                this.$juanNotice('删除成功！');\r\n              })\r\n              .catch(() => {});\r\n\r\n        }catch(e){}\r\n      },\r\n      async decrease(id) {\r\n        await CartApi.decrease(id)\r\n        this.list.find(item => item.id === id).count--;\r\n      },\r\n      async increase(id) {\r\n        try {\r\n          await CartApi.increase(id)\r\n          this.list.find(item => item.id === id).count++;\r\n        }catch(e) {}\r\n      }\r\n    },\r\n    computed: {\r\n      removeIds: {\r\n        get() {\r\n          let ids = [];\r\n          this.status.forEach((item, i) => {\r\n            if(item.checked2) ids.push(this.list[i].id);\r\n          })\r\n          return ids\r\n        }\r\n      },\r\n      buyId() {\r\n        let ids = [];\r\n        this.status.forEach((item, i) => {\r\n          if(item.checked1) ids.push(this.list[i].id);\r\n        })\r\n        return ids\r\n      },\r\n      isAllChecked: {\r\n        get() {\r\n          return this.status.every(item => item[this.isEdit? 'checked2' : 'checked1'])\r\n        },\r\n        set(value) {\r\n          this.status.forEach(item => {\r\n            item[this.isEdit ? 'checked2' : 'checked1'] = value;\r\n          })\r\n        }\r\n      },\r\n      total: {\r\n        get() {\r\n          let total = 0;\r\n          this.status.forEach((item,i) => {\r\n            if(item.checked1) {\r\n              total += this.list[i].price * this.list[i].count;\r\n            }\r\n          })\r\n          return total\r\n        }\r\n      },\r\n      buyCount: {\r\n        get() {\r\n          let buyCount = 0;\r\n          this.status.forEach((item, i) => {\r\n            if(item.checked1)\r\n              buyCount += this.list[i].count;\r\n          })\r\n          return buyCount;\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  i.checkbox\r\n    display: inline-block\r\n    height: 5.3vw\r\n    width: 5.3vw\r\n    background-size: 100% 100%\r\n    background-image: url(\"../assets/images/icon_checkbox_uncheck.png\")\r\n    &.checked\r\n      background-image: url(\"../assets/images/icon_checkbox_check.png\")\r\n  .contains\r\n    width: 100vw\r\n    height: 100vh\r\n    display: flex\r\n    flex-direction: column\r\n    .header\r\n      height: 40px\r\n      flex-shrink: 0\r\n      line-height: 40px\r\n      text-align: center\r\n      position: relative\r\n      padding: 0 10px\r\n      z-index: 1000\r\n      span.header-title\r\n        font-size: 18px\r\n      input\r\n        border: none\r\n        outline: none\r\n        font-size: 15px\r\n        position: absolute\r\n        top: 50%\r\n        right: 15px\r\n        transform: translateY(-50%)\r\n        background-color: #ffffff\r\n    .content\r\n      flex-grow: 1\r\n      border-top: 1px solid #b0b0b0\r\n      background-color: rgb(244, 244, 248)\r\n      overflow: auto\r\n      padding: 0!important\r\n      ul.list\r\n        li\r\n          display: flex\r\n          align-items: center\r\n          padding: 10px 20px\r\n          background-color: #ffffff\r\n          margin: 10px 0\r\n          .item-avatar\r\n            height: 100px\r\n            width: 100px\r\n            margin: 0 20px\r\n            img\r\n              height: 100%\r\n              width: 100%\r\n          .item-detail\r\n            display: flex\r\n            flex-direction: column\r\n            .name-wrapper\r\n              span.name\r\n                font-size: 14px\r\n                color: #333333\r\n            .price-wrapper\r\n              margin: 5px 0\r\n              span.price\r\n                color: #ff464e\r\n    .bottom\r\n      display: flex\r\n      height: 45px\r\n      padding-left: 15px\r\n      align-items: center\r\n      justify-content: flex-end\r\n      position: relative\r\n      flex-shrink: 0\r\n      .checkbox-wrapper\r\n        position: absolute\r\n        top: 50%\r\n        left: 15px\r\n        transform: translateY(-50%)\r\n        display: flex\r\n        align-items: center\r\n      .total-wrapper\r\n        //display: flex\r\n        align-items: flex-end\r\n        color: #666666\r\n        font-size: 14px\r\n        span.total\r\n          color: #ff464e\r\n          font-size: 18px\r\n      button.transfer\r\n        width: 115px\r\n        height: 100%\r\n        background-color: #f6a623\r\n        border: none\r\n        color: #ffffff\r\n        font-size: 18px\r\n      button.remove\r\n        width: 115px\r\n        height: 100%\r\n        background-color: #ff464e\r\n        color: #ffffff\r\n        border: none\r\n        font-size: 14px\r\n    .footer\r\n      flex-shrink: 0\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=148fa4de&scoped=true&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&id=148fa4de&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"148fa4de\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","attrs","isEdit","on","$event","_l","list","item","i","key","class","checked","status","avatar","domProps","_s","name","price","count","decrease","id","increase","directives","rawName","value","expression","isAllChecked","total","buyId","length","goOrderConfirm","buyCount","removeHandler","staticRenderFns","components","JuanTabBar","JuanCount","data","isLogin","addressId","checked1","checked2","methods","then","CartApi","catch","computed","removeIds","get","set","component"],"sourceRoot":""}